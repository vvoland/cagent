<h1>Agents</h1>
<p class="subtitle">Agents are the core building blocks of cagent. Each agent is an AI-powered entity with a model, instructions, tools, and optional sub-agents.</p>

<h2>What is an Agent?</h2>

<p>An agent in cagent is defined by:</p>

<ul>
  <li><strong>Model</strong> ‚Äî The AI model powering it (e.g., Claude, GPT-4o, Gemini). See <a href="#concepts/models" onclick="event.preventDefault(); navigate('concepts/models')">Models</a>.</li>
  <li><strong>Description</strong> ‚Äî A brief summary of what the agent does (used by other agents for delegation)</li>
  <li><strong>Instruction</strong> ‚Äî The system prompt that defines the agent's behavior and personality</li>
  <li><strong>Tools</strong> ‚Äî Capabilities like filesystem access, shell commands, or external APIs</li>
  <li><strong>Sub-agents</strong> ‚Äî Other agents it can delegate tasks to</li>
</ul>

<pre><code class="language-yaml">agents:
  root:
    model: anthropic/claude-sonnet-4-0
    description: Expert software developer
    instruction: |
      You are an expert developer. Write clean, efficient code
      and explain your reasoning step by step.
    toolsets:
      - type: filesystem
      - type: shell
      - type: think</code></pre>

<h2>The Root Agent</h2>

<p>Every cagent configuration has a <strong>root agent</strong> ‚Äî the entry point that receives user messages. In a single-agent setup, this is the only agent. In a multi-agent setup, the root agent acts as a coordinator, delegating tasks to specialized sub-agents.</p>

<div class="callout callout-info">
  <div class="callout-title">‚ÑπÔ∏è Naming</div>
  <p>The first agent defined in your YAML (or the one named <code>root</code>) is the root agent by default. You can also specify which agent to start with using <code>cagent run config.yaml -a agent_name</code>.</p>
</div>

<h2>Agent Properties</h2>

<table>
  <thead>
    <tr><th>Property</th><th>Type</th><th>Required</th><th>Description</th></tr>
  </thead>
  <tbody>
    <tr><td><code>model</code></td><td>string</td><td>‚úì</td><td>Model reference (inline like <code>openai/gpt-4o</code> or a named model)</td></tr>
    <tr><td><code>description</code></td><td>string</td><td>‚úì</td><td>What the agent does ‚Äî used by other agents for delegation</td></tr>
    <tr><td><code>instruction</code></td><td>string</td><td>‚úì</td><td>System prompt defining behavior</td></tr>
    <tr><td><code>toolsets</code></td><td>array</td><td>‚úó</td><td>List of tool configurations</td></tr>
    <tr><td><code>sub_agents</code></td><td>array</td><td>‚úó</td><td>Names of agents this agent can delegate to</td></tr>
    <tr><td><code>fallback</code></td><td>object</td><td>‚úó</td><td>Fallback model configuration for resilience</td></tr>
    <tr><td><code>add_date</code></td><td>boolean</td><td>‚úó</td><td>Include current date in context</td></tr>
    <tr><td><code>add_environment_info</code></td><td>boolean</td><td>‚úó</td><td>Include OS, working directory, git info in context</td></tr>
    <tr><td><code>max_iterations</code></td><td>int</td><td>‚úó</td><td>Max tool-calling loops (default: unlimited)</td></tr>
    <tr><td><code>commands</code></td><td>object</td><td>‚úó</td><td>Named prompts callable via <code>/command</code></td></tr>
    <tr><td><code>skills</code></td><td>boolean</td><td>‚úó</td><td>Enable skill discovery and loading</td></tr>
  </tbody>
</table>

<h2>Model Fallbacks</h2>

<p>Agents can automatically fail over to alternative models when the primary model is unavailable:</p>

<pre><code class="language-yaml">agents:
  root:
    model: anthropic/claude-sonnet-4-0
    fallback:
      models:
        - openai/gpt-4o
        - google/gemini-2.5-flash
      retries: 2       # retries per model for 5xx errors
      cooldown: 1m     # stick with fallback after 429</code></pre>

<h2>Named Commands</h2>

<p>Define reusable prompts that can be invoked as commands:</p>

<pre><code class="language-yaml">agents:
  root:
    model: openai/gpt-4o
    instruction: You are a helpful assistant.
    commands:
      df: "Check how much free space I have on my disk"
      greet: "Say hello to ${env.USER}"</code></pre>

<pre><code class="language-bash"># Run a named command
$ cagent run agent.yaml /df
$ cagent run agent.yaml /greet</code></pre>

<p>Commands support environment variable interpolation using JavaScript template literal syntax. Undefined variables expand to empty strings.</p>

<h2>Default Agent</h2>

<p>Running <code>cagent run</code> without a config file uses a built-in default agent. This is a capable general-purpose agent for quick tasks without needing any configuration.</p>

<pre><code class="language-bash"># Use the default agent
$ cagent run

# Override the default with an alias
$ cagent alias add default /path/to/my-agent.yaml
$ cagent run  # now runs your custom agent</code></pre>

<div class="callout callout-tip">
  <div class="callout-title">üí° See also</div>
  <p>For reusable task-specific instructions, see <a href="#features/skills" onclick="event.preventDefault(); navigate('features/skills')">Skills</a>. For multi-agent patterns, see <a href="#concepts/multi-agent" onclick="event.preventDefault(); navigate('concepts/multi-agent')">Multi-Agent</a>. For full config reference, see <a href="#configuration/agents" onclick="event.preventDefault(); navigate('configuration/agents')">Agent Config</a>.</p>
</div>
