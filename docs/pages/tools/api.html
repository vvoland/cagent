<h1>API Tool</h1>
<p class="subtitle">Create custom tools that call HTTP APIs.</p>

<h2>Overview</h2>

<p>The API tool type lets you define custom tools that make HTTP requests to external APIs. This is useful for integrating agents with REST APIs, webhooks, or any HTTP-based service without writing code.</p>

<div class="callout callout-info">
  <div class="callout-title">‚ÑπÔ∏è When to Use</div>
  <ul>
    <li>Integrating with REST APIs that don't have an MCP server</li>
    <li>Simple HTTP operations (GET, POST)</li>
    <li>Quick prototyping before building a full MCP server</li>
  </ul>
</div>

<h2>Configuration</h2>

<pre><code class="language-yaml">agents:
  assistant:
    model: openai/gpt-4o
    description: Assistant with API access
    instruction: You can look up weather information.
    toolsets:
      - type: api
        name: get_weather
        method: GET
        endpoint: "https://api.weather.example/v1/current?city=${city}"
        instruction: Get current weather for a city
        args:
          city:
            type: string
            description: City name to get weather for
        required: ["city"]
        headers:
          Authorization: "Bearer ${env.WEATHER_API_KEY}"</code></pre>

<h2>Properties</h2>

<table>
  <thead><tr><th>Property</th><th>Type</th><th>Required</th><th>Description</th></tr></thead>
  <tbody>
    <tr><td><code>name</code></td><td>string</td><td>‚úì</td><td>Tool name (how the agent references it)</td></tr>
    <tr><td><code>method</code></td><td>string</td><td>‚úì</td><td>HTTP method: <code>GET</code> or <code>POST</code></td></tr>
    <tr><td><code>endpoint</code></td><td>string</td><td>‚úì</td><td>URL endpoint (supports <code>${param}</code> interpolation)</td></tr>
    <tr><td><code>instruction</code></td><td>string</td><td>‚úó</td><td>Description shown to the agent</td></tr>
    <tr><td><code>args</code></td><td>object</td><td>‚úó</td><td>Parameter definitions (JSON Schema properties)</td></tr>
    <tr><td><code>required</code></td><td>array</td><td>‚úó</td><td>List of required parameter names</td></tr>
    <tr><td><code>headers</code></td><td>object</td><td>‚úó</td><td>HTTP headers to include</td></tr>
    <tr><td><code>output_schema</code></td><td>object</td><td>‚úó</td><td>JSON Schema for the response (for documentation)</td></tr>
  </tbody>
</table>

<h2>HTTP Methods</h2>

<h3>GET Requests</h3>

<p>For GET requests, parameters are interpolated into the URL:</p>

<pre><code class="language-yaml">toolsets:
  - type: api
    name: search_users
    method: GET
    endpoint: "https://api.example.com/users?q=${query}&limit=${limit}"
    instruction: Search for users by name
    args:
      query:
        type: string
        description: Search query
      limit:
        type: integer
        description: Maximum results (default 10)
    required: ["query"]</code></pre>

<h3>POST Requests</h3>

<p>For POST requests, parameters are sent as JSON in the request body:</p>

<pre><code class="language-yaml">toolsets:
  - type: api
    name: create_task
    method: POST
    endpoint: "https://api.example.com/tasks"
    instruction: Create a new task
    args:
      title:
        type: string
        description: Task title
      description:
        type: string
        description: Task description
      priority:
        type: string
        enum: ["low", "medium", "high"]
        description: Task priority
    required: ["title"]
    headers:
      Content-Type: "application/json"
      Authorization: "Bearer ${env.API_TOKEN}"</code></pre>

<h2>URL Interpolation</h2>

<p>Use <code>${param}</code> syntax to insert parameter values into URLs:</p>

<pre><code class="language-yaml">endpoint: "https://api.example.com/users/${user_id}/posts/${post_id}"</code></pre>

<p>Parameter values are URL-encoded automatically.</p>

<h2>Headers</h2>

<p>Headers can include environment variables:</p>

<pre><code class="language-yaml">headers:
  Authorization: "Bearer ${env.API_KEY}"
  X-Custom-Header: "static-value"
  Content-Type: "application/json"</code></pre>

<h2>Output Schema</h2>

<p>Optionally document the expected response format:</p>

<pre><code class="language-yaml">toolsets:
  - type: api
    name: get_user
    method: GET
    endpoint: "https://api.example.com/users/${id}"
    instruction: Get user details by ID
    args:
      id:
        type: string
        description: User ID
    required: ["id"]
    output_schema:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        email:
          type: string
        created_at:
          type: string</code></pre>

<h2>Example: GitHub API</h2>

<pre><code class="language-yaml">agents:
  github_assistant:
    model: openai/gpt-4o
    description: Assistant that can query GitHub
    instruction: You can look up GitHub repositories and users.
    toolsets:
      - type: api
        name: get_repo
        method: GET
        endpoint: "https://api.github.com/repos/${owner}/${repo}"
        instruction: Get information about a GitHub repository
        args:
          owner:
            type: string
            description: Repository owner (user or org)
          repo:
            type: string
            description: Repository name
        required: ["owner", "repo"]
        headers:
          Accept: "application/vnd.github.v3+json"
          Authorization: "Bearer ${env.GITHUB_TOKEN}"
      
      - type: api
        name: get_user
        method: GET
        endpoint: "https://api.github.com/users/${username}"
        instruction: Get information about a GitHub user
        args:
          username:
            type: string
            description: GitHub username
        required: ["username"]
        headers:
          Accept: "application/vnd.github.v3+json"</code></pre>

<h2>Limitations</h2>

<ul>
  <li>Only supports GET and POST methods</li>
  <li>Response body is limited to 1MB</li>
  <li>30 second timeout per request</li>
  <li>Only HTTP and HTTPS URLs are supported</li>
  <li>No support for file uploads or multipart forms</li>
</ul>

<div class="callout callout-tip">
  <div class="callout-title">üí° For Complex APIs</div>
  <p>For APIs that need authentication flows, pagination, or complex request/response handling, consider using an MCP server instead. The API tool is best for simple, stateless HTTP operations.</p>
</div>

<div class="callout callout-warning">
  <div class="callout-title">‚ö†Ô∏è Security</div>
  <p>API keys and tokens in headers are visible in debug logs. Use environment variables (<code>${env.VAR}</code>) rather than hardcoding secrets in configuration files.</p>
</div>
