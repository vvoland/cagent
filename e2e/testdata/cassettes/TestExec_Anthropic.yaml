---
version: 2
interactions:
    - id: 0
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        host: api.anthropic.com
        body: '{"max_tokens":64000,"messages":[{"content":[{"text":"What''s 2+2?","cache_control":{"type":"ephemeral"},"type":"text"}],"role":"user"}],"model":"claude-sonnet-4-0","system":[{"text":"You are a knowledgeable assistant that helps users with various tasks.\nBe helpful, accurate, and concise in your responses.","cache_control":{"type":"ephemeral"},"type":"text"}],"thinking":{"budget_tokens":8192,"type":"enabled"},"tools":[],"stream":true}'
        form:
            beta:
                - "true"
        url: https://api.anthropic.com/v1/messages?beta=true
        method: POST
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        content_length: -1
        body: |+
            event: message_start
            data: {"type":"message_start","message":{"model":"claude-sonnet-4-20250514","id":"msg_01XdBWjQgiaSjP8e9d3YrnJ6","type":"message","role":"assistant","content":[],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":72,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}}       }

            event: content_block_start
            data: {"type":"content_block_start","index":0,"content_block":{"type":"thinking","thinking":"","signature":""}           }

            event: ping
            data: {"type": "ping"}

            event: content_block_delta
            data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":"This"}           }

            event: content_block_delta
            data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":" is a simple arithmetic question."}        }

            event: content_block_delta
            data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":" "}}

            event: content_block_delta
            data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":"2 "}      }

            event: content_block_delta
            data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":"+ 2 = 4."}             }

            event: content_block_delta
            data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":" This"}    }

            event: content_block_delta
            data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":" is a basic"}          }

            event: content_block_delta
            data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":" math"}        }

            event: content_block_delta
            data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":" fact that I should answer"}          }

            event: content_block_delta
            data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":" directly"}            }

            event: content_block_delta
            data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":" an"}               }

            event: content_block_delta
            data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":"d accurately."}  }

            event: content_block_delta
            data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":""}             }

            event: content_block_delta
            data: {"type":"content_block_delta","index":0,"delta":{"type":"signature_delta","signature":"EqECCkYICxgCKkCBEDDA5Ostk+KQMjR9hLF5g9zTT2AD0xR/pleqahaHWxCY1hG/7u56MP672Cxb4rtOf3zJCC9A2o66eE35ofbOEgzK81rEcZh1x8Ve81QaDGnmf45zz6rCx5EnaCIw8qudSsQbjEauPpGM+DN2NGgatKlRkIlEx2aV0dhy+EO7NqCKY+X/iC1gB3a3TH0pKogBC4qbBiJr44UZswjhs1JyOblrJtgvIu0Bv8v0J9svL6IHSGywo9SQztKEoU8SIzlnFSjJjExfvVfvxQJOe1kxLDRPRVs97rOiBUubWMIxIQuzGMcSMzZciEqul6oKFt+Tfno4OEI3FDhyE5Dwy4nSZLp+B+i3b0cC1G+l+T88Be1tSwXYILNxtxgB"}}

            event: content_block_stop
            data: {"type":"content_block_stop","index":0      }

            event: content_block_start
            data: {"type":"content_block_start","index":1,"content_block":{"type":"text","text":""}            }

            event: content_block_delta
            data: {"type":"content_block_delta","index":1,"delta":{"type":"text_delta","text":"2 + 2 "}            }

            event: content_block_delta
            data: {"type":"content_block_delta","index":1,"delta":{"type":"text_delta","text":"= 4"}   }

            event: content_block_stop
            data: {"type":"content_block_stop","index":1   }

            event: message_delta
            data: {"type":"message_delta","delta":{"stop_reason":"end_turn","stop_sequence":null},"usage":{"input_tokens":72,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"output_tokens":52}  }

            event: message_stop
            data: {"type":"message_stop"             }

        headers: {}
        status: 200 OK
        code: 200
        duration: 4.09885925s
