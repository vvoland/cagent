---
version: 2
interactions:
- id: 0
  request:
    proto: HTTP/1.1
    proto_major: 1
    proto_minor: 1
    content_length: 0
    host: api.anthropic.com
    body: "{\"messages\":[{\"content\":[{\"text\":\"How many files in testdata/working_dir? Only output the number.\",\"type\":\"text\"}],\"role\":\"user\"}],\"model\":\"claude-sonnet-4-0\",\"system\":[{\"text\":\"You are a knowledgeable assistant that helps users with various tasks.\\nBe helpful, accurate, and concise in your responses.\",\"type\":\"text\"},{\"text\":\"## Filesystem Tool Instructions\\n\\nThis toolset provides comprehensive filesystem operations with built-in security restrictions.\\n\\n### Security Model\\n- All operations are restricted to allowed directories only\\n- Use list_allowed_directories to see available paths\\n- Subdirectories within allowed directories are accessible\\n- Use add_allowed_directory to request access to new directories (requires user consent)\\n\\n### Directory Access Management\\n- If you need access to a directory outside the allowed list, use add_allowed_directory\\n- This will request user consent before expanding filesystem access\\n- Always provide a clear reason when requesting new directory access\\n\\n### Common Patterns\\n- Always check if directories exist before creating files\\n- Prefer read_multiple_files for batch operations\\n- Use search_files_content for finding specific code or text\\n\\n### Performance Tips\\n- Use read_multiple_files instead of multiple read_file calls\\n- Use directory_tree with max_depth to limit large traversals\\n- Use appropriate exclude patterns in search operations\",\"cache_control\":{\"type\":\"ephemeral\"},\"type\":\"text\"}],\"tools\":[{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The directory path to create\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"create_directory\",\"description\":\"Create a new directory or ensure a directory exists. Can create multiple nested directories in one operation.\"},{\"input_schema\":{\"properties\":{\"max_depth\":{\"description\":\"Maximum depth to traverse (optional)\",\"type\":\"integer\"},\"path\":{\"description\":\"The directory path to traverse\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"directory_tree\",\"description\":\"Get a recursive tree view of files and directories as a JSON structure.\"},{\"input_schema\":{\"properties\":{\"edits\":{\"description\":\"Array of edit operations\",\"items\":{\"additionalProperties\":false,\"properties\":{\"newText\":{\"description\":\"The replacement text\",\"type\":\"string\"},\"oldText\":{\"description\":\"The exact text to replace\",\"type\":\"string\"}},\"required\":[\"oldText\",\"newText\"],\"type\":\"object\"},\"type\":\"array\"},\"path\":{\"description\":\"The file path to edit\",\"type\":\"string\"}},\"required\":[\"path\",\"edits\"],\"type\":\"object\"},\"name\":\"edit_file\",\"description\":\"Make line-based edits to a text file. Each edit replaces exact line sequences with new content.\"},{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The file or directory path to inspect\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"get_file_info\",\"description\":\"Retrieve detailed metadata about a file or directory.\"},{\"input_schema\":{\"properties\":{},\"type\":\"object\"},\"name\":\"list_allowed_directories\",\"description\":\"Returns a list of directories that the server has permission to access. Don't call if you access only the current working directory. It's always allowed.\"},{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The directory path to add to allowed directories\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"add_allowed_directory\",\"description\":\"Request to add a new directory to the allowed directories list. This requires explicit user consent for security reasons.\"},{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The directory path to list\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"list_directory\",\"description\":\"Get a detailed listing of all files and directories in a specified path.\"},{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The directory path to list\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"list_directory_with_sizes\",\"description\":\"Get a detailed listing of all files and directories in a specified path, including sizes.\"},{\"input_schema\":{\"properties\":{\"destination\":{\"description\":\"The destination path\",\"type\":\"string\"},\"source\":{\"description\":\"The source path\",\"type\":\"string\"}},\"required\":[\"source\",\"destination\"],\"type\":\"object\"},\"name\":\"move_file\",\"description\":\"Move or rename files and directories.\"},{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The file path to read\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"read_file\",\"description\":\"Read the complete contents of a file from the file system.\"},{\"input_schema\":{\"properties\":{\"json\":{\"description\":\"Whether to return the result as JSON\",\"type\":\"boolean\"},\"paths\":{\"description\":\"Array of file paths to read\",\"items\":{\"type\":\"string\"},\"type\":\"array\"}},\"required\":[\"paths\"],\"type\":\"object\"},\"name\":\"read_multiple_files\",\"description\":\"Read the contents of multiple files simultaneously.\"},{\"input_schema\":{\"properties\":{\"excludePatterns\":{\"description\":\"Patterns to exclude from search\",\"items\":{\"type\":\"string\"},\"type\":\"array\"},\"path\":{\"description\":\"The starting directory path\",\"type\":\"string\"},\"pattern\":{\"description\":\"The search pattern\",\"type\":\"string\"}},\"required\":[\"path\",\"pattern\"],\"type\":\"object\"},\"name\":\"search_files\",\"description\":\"Recursively search for files and directories matching a pattern. Prints the full paths of matching files and the total number of files found.\"},{\"input_schema\":{\"properties\":{\"excludePatterns\":{\"description\":\"Patterns to exclude from search\",\"items\":{\"type\":\"string\"},\"type\":\"array\"},\"is_regex\":{\"description\":\"If true, treat query as regex; otherwise literal text\",\"type\":\"boolean\"},\"path\":{\"description\":\"The starting directory path\",\"type\":\"string\"},\"query\":{\"description\":\"The text or regex pattern to search for\",\"type\":\"string\"}},\"required\":[\"path\",\"query\"],\"type\":\"object\"},\"name\":\"search_files_content\",\"description\":\"Searches for text or regex patterns in the content of files matching a GLOB pattern.\"},{\"input_schema\":{\"properties\":{\"content\":{\"description\":\"The content to write to the file\",\"type\":\"string\"},\"path\":{\"description\":\"The file path to write\",\"type\":\"string\"}},\"required\":[\"path\",\"content\"],\"type\":\"object\"},\"name\":\"write_file\",\"description\":\"Create a new file or completely overwrite an existing file with new content.\",\"cache_control\":{\"type\":\"ephemeral\"}}]}"
    url: https://api.anthropic.com/v1/messages/count_tokens
    method: POST
  response:
    proto: HTTP/2.0
    proto_major: 2
    proto_minor: 0
    content_length: 21
    body: "{\"input_tokens\":1937}"
    headers: {}
    status: 200 OK
    code: 200
    duration: 249.372833ms
- id: 1
  request:
    proto: HTTP/1.1
    proto_major: 1
    proto_minor: 1
    content_length: 0
    host: api.anthropic.com
    body: "{\"max_tokens\":8192,\"messages\":[{\"content\":[{\"text\":\"How many files in testdata/working_dir? Only output the number.\",\"type\":\"text\"}],\"role\":\"user\"}],\"model\":\"claude-sonnet-4-0\",\"system\":[{\"text\":\"You are a knowledgeable assistant that helps users with various tasks.\\nBe helpful, accurate, and concise in your responses.\",\"type\":\"text\"},{\"text\":\"## Filesystem Tool Instructions\\n\\nThis toolset provides comprehensive filesystem operations with built-in security restrictions.\\n\\n### Security Model\\n- All operations are restricted to allowed directories only\\n- Use list_allowed_directories to see available paths\\n- Subdirectories within allowed directories are accessible\\n- Use add_allowed_directory to request access to new directories (requires user consent)\\n\\n### Directory Access Management\\n- If you need access to a directory outside the allowed list, use add_allowed_directory\\n- This will request user consent before expanding filesystem access\\n- Always provide a clear reason when requesting new directory access\\n\\n### Common Patterns\\n- Always check if directories exist before creating files\\n- Prefer read_multiple_files for batch operations\\n- Use search_files_content for finding specific code or text\\n\\n### Performance Tips\\n- Use read_multiple_files instead of multiple read_file calls\\n- Use directory_tree with max_depth to limit large traversals\\n- Use appropriate exclude patterns in search operations\",\"cache_control\":{\"type\":\"ephemeral\"},\"type\":\"text\"}],\"tools\":[{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The directory path to create\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"create_directory\",\"description\":\"Create a new directory or ensure a directory exists. Can create multiple nested directories in one operation.\"},{\"input_schema\":{\"properties\":{\"max_depth\":{\"description\":\"Maximum depth to traverse (optional)\",\"type\":\"integer\"},\"path\":{\"description\":\"The directory path to traverse\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"directory_tree\",\"description\":\"Get a recursive tree view of files and directories as a JSON structure.\"},{\"input_schema\":{\"properties\":{\"edits\":{\"description\":\"Array of edit operations\",\"items\":{\"additionalProperties\":false,\"properties\":{\"newText\":{\"description\":\"The replacement text\",\"type\":\"string\"},\"oldText\":{\"description\":\"The exact text to replace\",\"type\":\"string\"}},\"required\":[\"oldText\",\"newText\"],\"type\":\"object\"},\"type\":\"array\"},\"path\":{\"description\":\"The file path to edit\",\"type\":\"string\"}},\"required\":[\"path\",\"edits\"],\"type\":\"object\"},\"name\":\"edit_file\",\"description\":\"Make line-based edits to a text file. Each edit replaces exact line sequences with new content.\"},{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The file or directory path to inspect\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"get_file_info\",\"description\":\"Retrieve detailed metadata about a file or directory.\"},{\"input_schema\":{\"properties\":{},\"type\":\"object\"},\"name\":\"list_allowed_directories\",\"description\":\"Returns a list of directories that the server has permission to access. Don't call if you access only the current working directory. It's always allowed.\"},{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The directory path to add to allowed directories\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"add_allowed_directory\",\"description\":\"Request to add a new directory to the allowed directories list. This requires explicit user consent for security reasons.\"},{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The directory path to list\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"list_directory\",\"description\":\"Get a detailed listing of all files and directories in a specified path.\"},{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The directory path to list\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"list_directory_with_sizes\",\"description\":\"Get a detailed listing of all files and directories in a specified path, including sizes.\"},{\"input_schema\":{\"properties\":{\"destination\":{\"description\":\"The destination path\",\"type\":\"string\"},\"source\":{\"description\":\"The source path\",\"type\":\"string\"}},\"required\":[\"source\",\"destination\"],\"type\":\"object\"},\"name\":\"move_file\",\"description\":\"Move or rename files and directories.\"},{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The file path to read\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"read_file\",\"description\":\"Read the complete contents of a file from the file system.\"},{\"input_schema\":{\"properties\":{\"json\":{\"description\":\"Whether to return the result as JSON\",\"type\":\"boolean\"},\"paths\":{\"description\":\"Array of file paths to read\",\"items\":{\"type\":\"string\"},\"type\":\"array\"}},\"required\":[\"paths\"],\"type\":\"object\"},\"name\":\"read_multiple_files\",\"description\":\"Read the contents of multiple files simultaneously.\"},{\"input_schema\":{\"properties\":{\"excludePatterns\":{\"description\":\"Patterns to exclude from search\",\"items\":{\"type\":\"string\"},\"type\":\"array\"},\"path\":{\"description\":\"The starting directory path\",\"type\":\"string\"},\"pattern\":{\"description\":\"The search pattern\",\"type\":\"string\"}},\"required\":[\"path\",\"pattern\"],\"type\":\"object\"},\"name\":\"search_files\",\"description\":\"Recursively search for files and directories matching a pattern. Prints the full paths of matching files and the total number of files found.\"},{\"input_schema\":{\"properties\":{\"excludePatterns\":{\"description\":\"Patterns to exclude from search\",\"items\":{\"type\":\"string\"},\"type\":\"array\"},\"is_regex\":{\"description\":\"If true, treat query as regex; otherwise literal text\",\"type\":\"boolean\"},\"path\":{\"description\":\"The starting directory path\",\"type\":\"string\"},\"query\":{\"description\":\"The text or regex pattern to search for\",\"type\":\"string\"}},\"required\":[\"path\",\"query\"],\"type\":\"object\"},\"name\":\"search_files_content\",\"description\":\"Searches for text or regex patterns in the content of files matching a GLOB pattern.\"},{\"input_schema\":{\"properties\":{\"content\":{\"description\":\"The content to write to the file\",\"type\":\"string\"},\"path\":{\"description\":\"The file path to write\",\"type\":\"string\"}},\"required\":[\"path\",\"content\"],\"type\":\"object\"},\"name\":\"write_file\",\"description\":\"Create a new file or completely overwrite an existing file with new content.\",\"cache_control\":{\"type\":\"ephemeral\"}}],\"stream\":true}"
    url: https://api.anthropic.com/v1/messages
    method: POST
  response:
    proto: HTTP/2.0
    proto_major: 2
    proto_minor: 0
    content_length: -1
    body: "event: message_start\ndata: {\"type\":\"message_start\",\"message\":{\"model\":\"claude-sonnet-4-20250514\",\"id\":\"msg_01GsRyAgQgpZCi6L3jQZABr7\",\"type\":\"message\",\"role\":\"assistant\",\"content\":[],\"stop_reason\":null,\"stop_sequence\":null,\"usage\":{\"input_tokens\":156,\"cache_creation_input_tokens\":1781,\"cache_read_input_tokens\":0,\"cache_creation\":{\"ephemeral_5m_input_tokens\":1781,\"ephemeral_1h_input_tokens\":0},\"output_tokens\":1,\"service_tier\":\"standard\"}}     }\n\nevent: content_block_start\ndata: {\"type\":\"content_block_start\",\"index\":0,\"content_block\":{\"type\":\"tool_use\",\"id\":\"toolu_014g64DPs3vFqF7Emh7qCUPC\",\"name\":\"list_directory\",\"input\":{}}             }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"input_json_delta\",\"partial_json\":\"\"}        }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"input_json_delta\",\"partial_json\":\"{\\\"path\\\"\"}   }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"input_json_delta\",\"partial_json\":\": \\\"testd\"}         }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"input_json_delta\",\"partial_json\":\"ata\"}    }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"input_json_delta\",\"partial_json\":\"/worki\"}               }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"input_json_delta\",\"partial_json\":\"ng_dir\\\"}\"}       }\n\nevent: content_block_stop\ndata: {\"type\":\"content_block_stop\",\"index\":0               }\n\nevent: message_delta\ndata: {\"type\":\"message_delta\",\"delta\":{\"stop_reason\":\"tool_use\",\"stop_sequence\":null},\"usage\":{\"input_tokens\":156,\"cache_creation_input_tokens\":1781,\"cache_read_input_tokens\":0,\"output_tokens\":58}               }\n\nevent: message_stop\ndata: {\"type\":\"message_stop\"              }\n\n"
    headers: {}
    status: 200 OK
    code: 200
    duration: 2.14536125s
- id: 2
  request:
    proto: HTTP/1.1
    proto_major: 1
    proto_minor: 1
    content_length: 0
    host: api.anthropic.com
    body: "{\"messages\":[{\"content\":[{\"text\":\"How many files in testdata/working_dir? Only output the number.\",\"type\":\"text\"}],\"role\":\"user\"},{\"content\":[{\"id\":\"toolu_014g64DPs3vFqF7Emh7qCUPC\",\"input\":{\"path\":\"testdata/working_dir\"},\"name\":\"list_directory\",\"type\":\"tool_use\"}],\"role\":\"assistant\"},{\"content\":[{\"tool_use_id\":\"toolu_014g64DPs3vFqF7Emh7qCUPC\",\"is_error\":false,\"content\":[{\"text\":\"FILE README.me\",\"type\":\"text\"}],\"type\":\"tool_result\"}],\"role\":\"user\"}],\"model\":\"claude-sonnet-4-0\",\"system\":[{\"text\":\"You are a knowledgeable assistant that helps users with various tasks.\\nBe helpful, accurate, and concise in your responses.\",\"type\":\"text\"},{\"text\":\"## Filesystem Tool Instructions\\n\\nThis toolset provides comprehensive filesystem operations with built-in security restrictions.\\n\\n### Security Model\\n- All operations are restricted to allowed directories only\\n- Use list_allowed_directories to see available paths\\n- Subdirectories within allowed directories are accessible\\n- Use add_allowed_directory to request access to new directories (requires user consent)\\n\\n### Directory Access Management\\n- If you need access to a directory outside the allowed list, use add_allowed_directory\\n- This will request user consent before expanding filesystem access\\n- Always provide a clear reason when requesting new directory access\\n\\n### Common Patterns\\n- Always check if directories exist before creating files\\n- Prefer read_multiple_files for batch operations\\n- Use search_files_content for finding specific code or text\\n\\n### Performance Tips\\n- Use read_multiple_files instead of multiple read_file calls\\n- Use directory_tree with max_depth to limit large traversals\\n- Use appropriate exclude patterns in search operations\",\"cache_control\":{\"type\":\"ephemeral\"},\"type\":\"text\"}],\"tools\":[{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The directory path to create\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"create_directory\",\"description\":\"Create a new directory or ensure a directory exists. Can create multiple nested directories in one operation.\"},{\"input_schema\":{\"properties\":{\"max_depth\":{\"description\":\"Maximum depth to traverse (optional)\",\"type\":\"integer\"},\"path\":{\"description\":\"The directory path to traverse\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"directory_tree\",\"description\":\"Get a recursive tree view of files and directories as a JSON structure.\"},{\"input_schema\":{\"properties\":{\"edits\":{\"description\":\"Array of edit operations\",\"items\":{\"additionalProperties\":false,\"properties\":{\"newText\":{\"description\":\"The replacement text\",\"type\":\"string\"},\"oldText\":{\"description\":\"The exact text to replace\",\"type\":\"string\"}},\"required\":[\"oldText\",\"newText\"],\"type\":\"object\"},\"type\":\"array\"},\"path\":{\"description\":\"The file path to edit\",\"type\":\"string\"}},\"required\":[\"path\",\"edits\"],\"type\":\"object\"},\"name\":\"edit_file\",\"description\":\"Make line-based edits to a text file. Each edit replaces exact line sequences with new content.\"},{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The file or directory path to inspect\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"get_file_info\",\"description\":\"Retrieve detailed metadata about a file or directory.\"},{\"input_schema\":{\"properties\":{},\"type\":\"object\"},\"name\":\"list_allowed_directories\",\"description\":\"Returns a list of directories that the server has permission to access. Don't call if you access only the current working directory. It's always allowed.\"},{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The directory path to add to allowed directories\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"add_allowed_directory\",\"description\":\"Request to add a new directory to the allowed directories list. This requires explicit user consent for security reasons.\"},{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The directory path to list\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"list_directory\",\"description\":\"Get a detailed listing of all files and directories in a specified path.\"},{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The directory path to list\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"list_directory_with_sizes\",\"description\":\"Get a detailed listing of all files and directories in a specified path, including sizes.\"},{\"input_schema\":{\"properties\":{\"destination\":{\"description\":\"The destination path\",\"type\":\"string\"},\"source\":{\"description\":\"The source path\",\"type\":\"string\"}},\"required\":[\"source\",\"destination\"],\"type\":\"object\"},\"name\":\"move_file\",\"description\":\"Move or rename files and directories.\"},{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The file path to read\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"read_file\",\"description\":\"Read the complete contents of a file from the file system.\"},{\"input_schema\":{\"properties\":{\"json\":{\"description\":\"Whether to return the result as JSON\",\"type\":\"boolean\"},\"paths\":{\"description\":\"Array of file paths to read\",\"items\":{\"type\":\"string\"},\"type\":\"array\"}},\"required\":[\"paths\"],\"type\":\"object\"},\"name\":\"read_multiple_files\",\"description\":\"Read the contents of multiple files simultaneously.\"},{\"input_schema\":{\"properties\":{\"excludePatterns\":{\"description\":\"Patterns to exclude from search\",\"items\":{\"type\":\"string\"},\"type\":\"array\"},\"path\":{\"description\":\"The starting directory path\",\"type\":\"string\"},\"pattern\":{\"description\":\"The search pattern\",\"type\":\"string\"}},\"required\":[\"path\",\"pattern\"],\"type\":\"object\"},\"name\":\"search_files\",\"description\":\"Recursively search for files and directories matching a pattern. Prints the full paths of matching files and the total number of files found.\"},{\"input_schema\":{\"properties\":{\"excludePatterns\":{\"description\":\"Patterns to exclude from search\",\"items\":{\"type\":\"string\"},\"type\":\"array\"},\"is_regex\":{\"description\":\"If true, treat query as regex; otherwise literal text\",\"type\":\"boolean\"},\"path\":{\"description\":\"The starting directory path\",\"type\":\"string\"},\"query\":{\"description\":\"The text or regex pattern to search for\",\"type\":\"string\"}},\"required\":[\"path\",\"query\"],\"type\":\"object\"},\"name\":\"search_files_content\",\"description\":\"Searches for text or regex patterns in the content of files matching a GLOB pattern.\"},{\"input_schema\":{\"properties\":{\"content\":{\"description\":\"The content to write to the file\",\"type\":\"string\"},\"path\":{\"description\":\"The file path to write\",\"type\":\"string\"}},\"required\":[\"path\",\"content\"],\"type\":\"object\"},\"name\":\"write_file\",\"description\":\"Create a new file or completely overwrite an existing file with new content.\",\"cache_control\":{\"type\":\"ephemeral\"}}]}"
    url: https://api.anthropic.com/v1/messages/count_tokens
    method: POST
  response:
    proto: HTTP/2.0
    proto_major: 2
    proto_minor: 0
    content_length: 21
    body: "{\"input_tokens\":2012}"
    headers: {}
    status: 200 OK
    code: 200
    duration: 192.322084ms
- id: 3
  request:
    proto: HTTP/1.1
    proto_major: 1
    proto_minor: 1
    content_length: 0
    host: api.anthropic.com
    body: "{\"max_tokens\":8192,\"messages\":[{\"content\":[{\"text\":\"How many files in testdata/working_dir? Only output the number.\",\"type\":\"text\"}],\"role\":\"user\"},{\"content\":[{\"id\":\"toolu_014g64DPs3vFqF7Emh7qCUPC\",\"input\":{\"path\":\"testdata/working_dir\"},\"name\":\"list_directory\",\"type\":\"tool_use\"}],\"role\":\"assistant\"},{\"content\":[{\"tool_use_id\":\"toolu_014g64DPs3vFqF7Emh7qCUPC\",\"is_error\":false,\"content\":[{\"text\":\"FILE README.me\",\"type\":\"text\"}],\"type\":\"tool_result\"}],\"role\":\"user\"}],\"model\":\"claude-sonnet-4-0\",\"system\":[{\"text\":\"You are a knowledgeable assistant that helps users with various tasks.\\nBe helpful, accurate, and concise in your responses.\",\"type\":\"text\"},{\"text\":\"## Filesystem Tool Instructions\\n\\nThis toolset provides comprehensive filesystem operations with built-in security restrictions.\\n\\n### Security Model\\n- All operations are restricted to allowed directories only\\n- Use list_allowed_directories to see available paths\\n- Subdirectories within allowed directories are accessible\\n- Use add_allowed_directory to request access to new directories (requires user consent)\\n\\n### Directory Access Management\\n- If you need access to a directory outside the allowed list, use add_allowed_directory\\n- This will request user consent before expanding filesystem access\\n- Always provide a clear reason when requesting new directory access\\n\\n### Common Patterns\\n- Always check if directories exist before creating files\\n- Prefer read_multiple_files for batch operations\\n- Use search_files_content for finding specific code or text\\n\\n### Performance Tips\\n- Use read_multiple_files instead of multiple read_file calls\\n- Use directory_tree with max_depth to limit large traversals\\n- Use appropriate exclude patterns in search operations\",\"cache_control\":{\"type\":\"ephemeral\"},\"type\":\"text\"}],\"tools\":[{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The directory path to create\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"create_directory\",\"description\":\"Create a new directory or ensure a directory exists. Can create multiple nested directories in one operation.\"},{\"input_schema\":{\"properties\":{\"max_depth\":{\"description\":\"Maximum depth to traverse (optional)\",\"type\":\"integer\"},\"path\":{\"description\":\"The directory path to traverse\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"directory_tree\",\"description\":\"Get a recursive tree view of files and directories as a JSON structure.\"},{\"input_schema\":{\"properties\":{\"edits\":{\"description\":\"Array of edit operations\",\"items\":{\"additionalProperties\":false,\"properties\":{\"newText\":{\"description\":\"The replacement text\",\"type\":\"string\"},\"oldText\":{\"description\":\"The exact text to replace\",\"type\":\"string\"}},\"required\":[\"oldText\",\"newText\"],\"type\":\"object\"},\"type\":\"array\"},\"path\":{\"description\":\"The file path to edit\",\"type\":\"string\"}},\"required\":[\"path\",\"edits\"],\"type\":\"object\"},\"name\":\"edit_file\",\"description\":\"Make line-based edits to a text file. Each edit replaces exact line sequences with new content.\"},{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The file or directory path to inspect\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"get_file_info\",\"description\":\"Retrieve detailed metadata about a file or directory.\"},{\"input_schema\":{\"properties\":{},\"type\":\"object\"},\"name\":\"list_allowed_directories\",\"description\":\"Returns a list of directories that the server has permission to access. Don't call if you access only the current working directory. It's always allowed.\"},{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The directory path to add to allowed directories\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"add_allowed_directory\",\"description\":\"Request to add a new directory to the allowed directories list. This requires explicit user consent for security reasons.\"},{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The directory path to list\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"list_directory\",\"description\":\"Get a detailed listing of all files and directories in a specified path.\"},{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The directory path to list\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"list_directory_with_sizes\",\"description\":\"Get a detailed listing of all files and directories in a specified path, including sizes.\"},{\"input_schema\":{\"properties\":{\"destination\":{\"description\":\"The destination path\",\"type\":\"string\"},\"source\":{\"description\":\"The source path\",\"type\":\"string\"}},\"required\":[\"source\",\"destination\"],\"type\":\"object\"},\"name\":\"move_file\",\"description\":\"Move or rename files and directories.\"},{\"input_schema\":{\"properties\":{\"path\":{\"description\":\"The file path to read\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"},\"name\":\"read_file\",\"description\":\"Read the complete contents of a file from the file system.\"},{\"input_schema\":{\"properties\":{\"json\":{\"description\":\"Whether to return the result as JSON\",\"type\":\"boolean\"},\"paths\":{\"description\":\"Array of file paths to read\",\"items\":{\"type\":\"string\"},\"type\":\"array\"}},\"required\":[\"paths\"],\"type\":\"object\"},\"name\":\"read_multiple_files\",\"description\":\"Read the contents of multiple files simultaneously.\"},{\"input_schema\":{\"properties\":{\"excludePatterns\":{\"description\":\"Patterns to exclude from search\",\"items\":{\"type\":\"string\"},\"type\":\"array\"},\"path\":{\"description\":\"The starting directory path\",\"type\":\"string\"},\"pattern\":{\"description\":\"The search pattern\",\"type\":\"string\"}},\"required\":[\"path\",\"pattern\"],\"type\":\"object\"},\"name\":\"search_files\",\"description\":\"Recursively search for files and directories matching a pattern. Prints the full paths of matching files and the total number of files found.\"},{\"input_schema\":{\"properties\":{\"excludePatterns\":{\"description\":\"Patterns to exclude from search\",\"items\":{\"type\":\"string\"},\"type\":\"array\"},\"is_regex\":{\"description\":\"If true, treat query as regex; otherwise literal text\",\"type\":\"boolean\"},\"path\":{\"description\":\"The starting directory path\",\"type\":\"string\"},\"query\":{\"description\":\"The text or regex pattern to search for\",\"type\":\"string\"}},\"required\":[\"path\",\"query\"],\"type\":\"object\"},\"name\":\"search_files_content\",\"description\":\"Searches for text or regex patterns in the content of files matching a GLOB pattern.\"},{\"input_schema\":{\"properties\":{\"content\":{\"description\":\"The content to write to the file\",\"type\":\"string\"},\"path\":{\"description\":\"The file path to write\",\"type\":\"string\"}},\"required\":[\"path\",\"content\"],\"type\":\"object\"},\"name\":\"write_file\",\"description\":\"Create a new file or completely overwrite an existing file with new content.\",\"cache_control\":{\"type\":\"ephemeral\"}}],\"stream\":true}"
    url: https://api.anthropic.com/v1/messages
    method: POST
  response:
    proto: HTTP/2.0
    proto_major: 2
    proto_minor: 0
    content_length: -1
    body: "event: message_start\ndata: {\"type\":\"message_start\",\"message\":{\"model\":\"claude-sonnet-4-20250514\",\"id\":\"msg_01B8LxgeydCiHQEziJcmKSxU\",\"type\":\"message\",\"role\":\"assistant\",\"content\":[],\"stop_reason\":null,\"stop_sequence\":null,\"usage\":{\"input_tokens\":231,\"cache_creation_input_tokens\":0,\"cache_read_input_tokens\":1781,\"cache_creation\":{\"ephemeral_5m_input_tokens\":0,\"ephemeral_1h_input_tokens\":0},\"output_tokens\":1,\"service_tier\":\"standard\"}}    }\n\nevent: content_block_start\ndata: {\"type\":\"content_block_start\",\"index\":0,\"content_block\":{\"type\":\"text\",\"text\":\"\"}              }\n\nevent: content_block_delta\ndata: {\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"text_delta\",\"text\":\"1\"}      }\n\nevent: content_block_stop\ndata: {\"type\":\"content_block_stop\",\"index\":0   }\n\nevent: message_delta\ndata: {\"type\":\"message_delta\",\"delta\":{\"stop_reason\":\"end_turn\",\"stop_sequence\":null},\"usage\":{\"input_tokens\":231,\"cache_creation_input_tokens\":0,\"cache_read_input_tokens\":1781,\"output_tokens\":4}   }\n\nevent: message_stop\ndata: {\"type\":\"message_stop\"   }\n\n"
    headers: {}
    status: 200 OK
    code: 200
    duration: 2.040817416s
