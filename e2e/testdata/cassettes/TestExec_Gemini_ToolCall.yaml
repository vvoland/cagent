---
version: 2
interactions:
- id: 0
  request:
    proto: HTTP/1.1
    proto_major: 1
    proto_minor: 1
    content_length: 0
    host: generativelanguage.googleapis.com
    body: "{\"contents\":[{\"parts\":[{\"text\":\"You are a knowledgeable assistant that helps users with various tasks.\\nBe helpful, accurate, and concise in your responses.\\n\"}],\"role\":\"user\"},{\"parts\":[{\"text\":\"## Filesystem Tool Instructions\\n\\nThis toolset provides comprehensive filesystem operations with built-in security restrictions.\\n\\n### Security Model\\n- All operations are restricted to allowed directories only\\n- Use list_allowed_directories to see available paths\\n- Subdirectories within allowed directories are accessible\\n- Use add_allowed_directory to request access to new directories (requires user consent)\\n\\n### Directory Access Management\\n- If you need access to a directory outside the allowed list, use add_allowed_directory\\n- This will request user consent before expanding filesystem access\\n- Always provide a clear reason when requesting new directory access\\n\\n### Common Patterns\\n- Always check if directories exist before creating files\\n- Prefer read_multiple_files for batch operations\\n- Use search_files_content for finding specific code or text\\n\\n### Performance Tips\\n- Use read_multiple_files instead of multiple read_file calls\\n- Use directory_tree with max_depth to limit large traversals\\n- Use appropriate exclude patterns in search operations\"}],\"role\":\"user\"},{\"parts\":[{\"text\":\"How many files in testdata/working_dir? Only output the number.\"}],\"role\":\"user\"}],\"generationConfig\":{},\"toolConfig\":{\"functionCallingConfig\":{\"mode\":\"AUTO\"}},\"tools\":[{\"functionDeclarations\":[{\"description\":\"Get a recursive tree view of files and directories as a JSON structure.\",\"name\":\"directory_tree\",\"parameters\":{\"properties\":{\"path\":{\"description\":\"The directory path to traverse\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"}},{\"description\":\"Make line-based edits to a text file. Each edit replaces exact line sequences with new content.\",\"name\":\"edit_file\",\"parameters\":{\"properties\":{\"edits\":{\"description\":\"Array of edit operations\",\"items\":{\"properties\":{\"newText\":{\"description\":\"The replacement text\",\"type\":\"string\"},\"oldText\":{\"description\":\"The exact text to replace\",\"type\":\"string\"}},\"required\":[\"oldText\",\"newText\"],\"type\":\"object\"},\"type\":\"array\"},\"path\":{\"description\":\"The file path to edit\",\"type\":\"string\"}},\"required\":[\"path\",\"edits\"],\"type\":\"object\"}},{\"description\":\"Returns a list of directories that the server has permission to access. Don't call if you access only the current working directory. It's always allowed.\",\"name\":\"list_allowed_directories\",\"parameters\":{\"type\":\"object\"}},{\"description\":\"Request to add a new directory to the allowed directories list. This requires explicit user consent for security reasons.\",\"name\":\"add_allowed_directory\",\"parameters\":{\"properties\":{\"path\":{\"description\":\"The directory path to add to allowed directories\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"}},{\"description\":\"Get a detailed listing of all files and directories in a specified path.\",\"name\":\"list_directory\",\"parameters\":{\"properties\":{\"path\":{\"description\":\"The directory path to list\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"}},{\"description\":\"Read the complete contents of a file from the file system.\",\"name\":\"read_file\",\"parameters\":{\"properties\":{\"path\":{\"description\":\"The file path to read\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"}},{\"description\":\"Read the contents of multiple files simultaneously.\",\"name\":\"read_multiple_files\",\"parameters\":{\"properties\":{\"json\":{\"description\":\"Whether to return the result as JSON\",\"type\":\"boolean\"},\"paths\":{\"description\":\"Array of file paths to read\",\"items\":{\"type\":\"string\"},\"type\":\"array\"}},\"required\":[\"paths\"],\"type\":\"object\"}},{\"description\":\"Recursively search for files and directories matching a pattern. Prints the full paths of matching files and the total number of files found. The pattern syntax is the same as Go's filepath.Match.\",\"name\":\"search_files\",\"parameters\":{\"properties\":{\"excludePatterns\":{\"description\":\"Patterns to exclude from search\",\"items\":{\"type\":\"string\"},\"type\":\"array\"},\"path\":{\"description\":\"The starting directory path\",\"type\":\"string\"},\"pattern\":{\"description\":\"The search pattern\",\"type\":\"string\"}},\"required\":[\"path\",\"pattern\"],\"type\":\"object\"}},{\"description\":\"Searches for text or regex patterns in the content of files matching a GLOB pattern.\",\"name\":\"search_files_content\",\"parameters\":{\"properties\":{\"excludePatterns\":{\"description\":\"Patterns to exclude from search\",\"items\":{\"type\":\"string\"},\"type\":\"array\"},\"is_regex\":{\"description\":\"If true, treat query as regex; otherwise literal text\",\"type\":\"boolean\"},\"path\":{\"description\":\"The starting directory path\",\"type\":\"string\"},\"query\":{\"description\":\"The text or regex pattern to search for\",\"type\":\"string\"}},\"required\":[\"path\",\"query\"],\"type\":\"object\"}},{\"description\":\"Create a new file or completely overwrite an existing file with new content.\",\"name\":\"write_file\",\"parameters\":{\"properties\":{\"content\":{\"description\":\"The content to write to the file\",\"type\":\"string\"},\"path\":{\"description\":\"The file path to write\",\"type\":\"string\"}},\"required\":[\"path\",\"content\"],\"type\":\"object\"}}]}]}\n"
    form:
      alt:
      - sse
    url: https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:streamGenerateContent?alt=sse
    method: POST
  response:
    proto: HTTP/2.0
    proto_major: 2
    proto_minor: 0
    content_length: -1
    body: "data: {\"candidates\": [{\"content\": {\"parts\": [{\"functionCall\": {\"name\": \"list_directory\",\"args\": {\"path\": \"testdata/working_dir\"}},\"thoughtSignature\": \"CiIBcsjafAsv9Dyz72/TdufYy4liw/BQygzWasUVkZpefQXwCm4BcsjafPhvGEQb5S6RMKrquAVyUfeMoKZObGWl1Q8Gb/Vdmuxj4uqMR6FUEJSa3HTjbNA8iDVqH/wODaCZ3Sn8jecU13M2hBV3Fp4Ut8/N9+PzAILHWhfRuhkzmpxgCbcZOMRnScM/M7TyZ+XWNgrhAQFyyNp8uR28j6KEAOTooTJcXa1PFvMRqcScJ1vfupBEmjAR0hw9BIAlqA+V2CeGxvefkYrglwpAN6Bw8HKrdbDqqKIeBPZEzwU8PdKLO5VnlRFfO7DIP9GZ8MBiFjLd0nqxPA3LnWX/vDKapNZgmxM7J+cgaawaNAKD4SY0lSL6H4sAUlXsZElmqDoZRT4mQOfaZwxfoEBBXHj/bksPrAl4S2ntW4fxPN+k9wJt/IYO50Vop9KfhOwicBSLlXnr7WjuIhFrnXftoZiFHH4IuUGKLKF9wvVXXrLu31zL6VIT3Aq5AQFyyNp8TWblN4EqBxt12kMIdK2shXIh+nO0inT8UpCtj5iweAFYJSh/Sb3Au4V14E4ctRelxvRzHLtdeqGrZvPxoBpO5YfU8Ib9ZDUMFNpRO5VVdvBsRjfYBoQgr8CUOItwugamx0h1p0I6YaFXymT+vROAE8NgNMkX9b/NuSkjLG3sWTgTvj3tJiHIA20TqjEJ0FHVjbmUhIiLY30GjtyktwfCXOsqHVdGv/CScm7HuegboaOq7KpXCtsBAXLI2nzGFp5KMSEsBpRcSXe3l3DV25v/2qzh1ixYnSfmf5zzilT112Q4Ae32MuoTdU6hi9HZwMWOtyd3bQX9xOtOpo0QZC8ZInLo3hqZ8LNz0Oa8/RIWzfJPdSi0wgKkTE6kaKzE8X5HzY22wOeO+9BrRrQ9KHWwxAI66R3t7M9w04V58MgyMzHLSRJw7asE0Ro6a3ESPSNVnX4aOSPmoaA6whIoY3zi1mB5dMvYQ+vQ/Epgh0Vb/8CJ2/TGVPwml/QarJVzD4HTxeW7WoUJfuEUanDZYFkY0bxUCvwBAXLI2nwyPZsy2TTxGKjEQArq+rxKBNEvRqeTZKI0DxwLhlZrpyV82YG/0MnSERrn6uscOhi0UdKsWp0oOBrU2fcAG2Ix4KX08soPtIdCwSsgLgzeIJUmtdNuwN0kcmjwJ5NOEj1S/kq5qhLGHz0PKC2XHrAL7kzdMDjZ7TxGOE5iL0UQiVxs5VbzcciGdLOon+eCF+hXaPL48LuSLjkIJxPlnj/7b7lg7IYEl9OEYKRphvSQCgXjhBLPzOYy+WdnlJ71COEL3Zvicflp8ZL61cv2vEAugq/OKdkK3X8qxNgSA1ObHrA+ca5eBW2XqVDrXXtIfXpwnW48o3J4CucBAXLI2nymLIsXeQtDCh6UHWF/UKMRKe27ii2U6TJ6bILCivmD7A5pNDqXK9YBgCzl2hGQtdTEf/f9/xk643fCJpL78GMpQNWELO2HPsvmM20nUVwDU9bXZkPuBCRN+K5SjmlczijOpRPq8TGpLue0J8+aI4nignCSR0ci05PWFO0bKz19GqdSXUkisMjfS7PV/D0mzpKe+nkvgMbq05iaymapuOxjv4j0fSTiuLPZMnkPviANuuTb/OEz36ePHyhmBTnV1roF21r7oU8tjM1Lmb4hicJwYIgyLQn7hEHLKDZmg+4JBU8KCncBcsjafOdx0wfiGOuUarxRv5qc2SleSVaRBdDe0Hzp9AlxKKdm43gWOumg8CeEN15CgIsEj0v3tBr+ioMhaZBi9TIpwMUllibzOh7J3BEvDYlE+OiHPAcHGQMmQZIjGBpm/wejLQcePu0ap/9BCtxJ5yDOiaXgLA==\"}],\"role\": \"model\"},\"finishReason\": \"STOP\",\"index\": 0,\"finishMessage\": \"Model generated function call(s).\"}],\"usageMetadata\": {\"promptTokenCount\": 1025,\"candidatesTokenCount\": 20,\"totalTokenCount\": 1334,\"promptTokensDetails\": [{\"modality\": \"TEXT\",\"tokenCount\": 1025}],\"thoughtsTokenCount\": 289},\"modelVersion\": \"gemini-2.5-flash\",\"responseId\": \"PhgqacneOPXtkdUPk-XssA0\"}\r\n\r\n"
    headers: {}
    status: 200 OK
    code: 200
    duration: 1.783224625s
- id: 1
  request:
    proto: HTTP/1.1
    proto_major: 1
    proto_minor: 1
    content_length: 0
    host: generativelanguage.googleapis.com
    body: "{\"contents\":[{\"parts\":[{\"text\":\"You are a knowledgeable assistant that helps users with various tasks.\\nBe helpful, accurate, and concise in your responses.\\n\"}],\"role\":\"user\"},{\"parts\":[{\"text\":\"## Filesystem Tool Instructions\\n\\nThis toolset provides comprehensive filesystem operations with built-in security restrictions.\\n\\n### Security Model\\n- All operations are restricted to allowed directories only\\n- Use list_allowed_directories to see available paths\\n- Subdirectories within allowed directories are accessible\\n- Use add_allowed_directory to request access to new directories (requires user consent)\\n\\n### Directory Access Management\\n- If you need access to a directory outside the allowed list, use add_allowed_directory\\n- This will request user consent before expanding filesystem access\\n- Always provide a clear reason when requesting new directory access\\n\\n### Common Patterns\\n- Always check if directories exist before creating files\\n- Prefer read_multiple_files for batch operations\\n- Use search_files_content for finding specific code or text\\n\\n### Performance Tips\\n- Use read_multiple_files instead of multiple read_file calls\\n- Use directory_tree with max_depth to limit large traversals\\n- Use appropriate exclude patterns in search operations\"}],\"role\":\"user\"},{\"parts\":[{\"text\":\"How many files in testdata/working_dir? Only output the number.\"}],\"role\":\"user\"},{\"parts\":[{\"functionCall\":{\"args\":{\"path\":\"testdata/working_dir\"},\"name\":\"list_directory\"},\"thoughtSignature\":\"CiIBcsjafAsv9Dyz72/TdufYy4liw/BQygzWasUVkZpefQXwCm4BcsjafPhvGEQb5S6RMKrquAVyUfeMoKZObGWl1Q8Gb/Vdmuxj4uqMR6FUEJSa3HTjbNA8iDVqH/wODaCZ3Sn8jecU13M2hBV3Fp4Ut8/N9+PzAILHWhfRuhkzmpxgCbcZOMRnScM/M7TyZ+XWNgrhAQFyyNp8uR28j6KEAOTooTJcXa1PFvMRqcScJ1vfupBEmjAR0hw9BIAlqA+V2CeGxvefkYrglwpAN6Bw8HKrdbDqqKIeBPZEzwU8PdKLO5VnlRFfO7DIP9GZ8MBiFjLd0nqxPA3LnWX/vDKapNZgmxM7J+cgaawaNAKD4SY0lSL6H4sAUlXsZElmqDoZRT4mQOfaZwxfoEBBXHj/bksPrAl4S2ntW4fxPN+k9wJt/IYO50Vop9KfhOwicBSLlXnr7WjuIhFrnXftoZiFHH4IuUGKLKF9wvVXXrLu31zL6VIT3Aq5AQFyyNp8TWblN4EqBxt12kMIdK2shXIh+nO0inT8UpCtj5iweAFYJSh/Sb3Au4V14E4ctRelxvRzHLtdeqGrZvPxoBpO5YfU8Ib9ZDUMFNpRO5VVdvBsRjfYBoQgr8CUOItwugamx0h1p0I6YaFXymT+vROAE8NgNMkX9b/NuSkjLG3sWTgTvj3tJiHIA20TqjEJ0FHVjbmUhIiLY30GjtyktwfCXOsqHVdGv/CScm7HuegboaOq7KpXCtsBAXLI2nzGFp5KMSEsBpRcSXe3l3DV25v/2qzh1ixYnSfmf5zzilT112Q4Ae32MuoTdU6hi9HZwMWOtyd3bQX9xOtOpo0QZC8ZInLo3hqZ8LNz0Oa8/RIWzfJPdSi0wgKkTE6kaKzE8X5HzY22wOeO+9BrRrQ9KHWwxAI66R3t7M9w04V58MgyMzHLSRJw7asE0Ro6a3ESPSNVnX4aOSPmoaA6whIoY3zi1mB5dMvYQ+vQ/Epgh0Vb/8CJ2/TGVPwml/QarJVzD4HTxeW7WoUJfuEUanDZYFkY0bxUCvwBAXLI2nwyPZsy2TTxGKjEQArq+rxKBNEvRqeTZKI0DxwLhlZrpyV82YG/0MnSERrn6uscOhi0UdKsWp0oOBrU2fcAG2Ix4KX08soPtIdCwSsgLgzeIJUmtdNuwN0kcmjwJ5NOEj1S/kq5qhLGHz0PKC2XHrAL7kzdMDjZ7TxGOE5iL0UQiVxs5VbzcciGdLOon+eCF+hXaPL48LuSLjkIJxPlnj/7b7lg7IYEl9OEYKRphvSQCgXjhBLPzOYy+WdnlJ71COEL3Zvicflp8ZL61cv2vEAugq/OKdkK3X8qxNgSA1ObHrA+ca5eBW2XqVDrXXtIfXpwnW48o3J4CucBAXLI2nymLIsXeQtDCh6UHWF/UKMRKe27ii2U6TJ6bILCivmD7A5pNDqXK9YBgCzl2hGQtdTEf/f9/xk643fCJpL78GMpQNWELO2HPsvmM20nUVwDU9bXZkPuBCRN+K5SjmlczijOpRPq8TGpLue0J8+aI4nignCSR0ci05PWFO0bKz19GqdSXUkisMjfS7PV/D0mzpKe+nkvgMbq05iaymapuOxjv4j0fSTiuLPZMnkPviANuuTb/OEz36ePHyhmBTnV1roF21r7oU8tjM1Lmb4hicJwYIgyLQn7hEHLKDZmg+4JBU8KCncBcsjafOdx0wfiGOuUarxRv5qc2SleSVaRBdDe0Hzp9AlxKKdm43gWOumg8CeEN15CgIsEj0v3tBr+ioMhaZBi9TIpwMUllibzOh7J3BEvDYlE+OiHPAcHGQMmQZIjGBpm/wejLQcePu0ap/9BCtxJ5yDOiaXgLA==\"}],\"role\":\"model\"},{\"parts\":[{\"functionResponse\":{\"name\":\"call_0d46ba0d-bdb2-47fb-9848-6d67e24a0b84\",\"response\":{\"result\":\"FILE README.me\\n\"}}}],\"role\":\"user\"}],\"generationConfig\":{},\"toolConfig\":{\"functionCallingConfig\":{\"mode\":\"AUTO\"}},\"tools\":[{\"functionDeclarations\":[{\"description\":\"Get a recursive tree view of files and directories as a JSON structure.\",\"name\":\"directory_tree\",\"parameters\":{\"properties\":{\"path\":{\"description\":\"The directory path to traverse\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"}},{\"description\":\"Make line-based edits to a text file. Each edit replaces exact line sequences with new content.\",\"name\":\"edit_file\",\"parameters\":{\"properties\":{\"edits\":{\"description\":\"Array of edit operations\",\"items\":{\"properties\":{\"newText\":{\"description\":\"The replacement text\",\"type\":\"string\"},\"oldText\":{\"description\":\"The exact text to replace\",\"type\":\"string\"}},\"required\":[\"oldText\",\"newText\"],\"type\":\"object\"},\"type\":\"array\"},\"path\":{\"description\":\"The file path to edit\",\"type\":\"string\"}},\"required\":[\"path\",\"edits\"],\"type\":\"object\"}},{\"description\":\"Returns a list of directories that the server has permission to access. Don't call if you access only the current working directory. It's always allowed.\",\"name\":\"list_allowed_directories\",\"parameters\":{\"type\":\"object\"}},{\"description\":\"Request to add a new directory to the allowed directories list. This requires explicit user consent for security reasons.\",\"name\":\"add_allowed_directory\",\"parameters\":{\"properties\":{\"path\":{\"description\":\"The directory path to add to allowed directories\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"}},{\"description\":\"Get a detailed listing of all files and directories in a specified path.\",\"name\":\"list_directory\",\"parameters\":{\"properties\":{\"path\":{\"description\":\"The directory path to list\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"}},{\"description\":\"Read the complete contents of a file from the file system.\",\"name\":\"read_file\",\"parameters\":{\"properties\":{\"path\":{\"description\":\"The file path to read\",\"type\":\"string\"}},\"required\":[\"path\"],\"type\":\"object\"}},{\"description\":\"Read the contents of multiple files simultaneously.\",\"name\":\"read_multiple_files\",\"parameters\":{\"properties\":{\"json\":{\"description\":\"Whether to return the result as JSON\",\"type\":\"boolean\"},\"paths\":{\"description\":\"Array of file paths to read\",\"items\":{\"type\":\"string\"},\"type\":\"array\"}},\"required\":[\"paths\"],\"type\":\"object\"}},{\"description\":\"Recursively search for files and directories matching a pattern. Prints the full paths of matching files and the total number of files found. The pattern syntax is the same as Go's filepath.Match.\",\"name\":\"search_files\",\"parameters\":{\"properties\":{\"excludePatterns\":{\"description\":\"Patterns to exclude from search\",\"items\":{\"type\":\"string\"},\"type\":\"array\"},\"path\":{\"description\":\"The starting directory path\",\"type\":\"string\"},\"pattern\":{\"description\":\"The search pattern\",\"type\":\"string\"}},\"required\":[\"path\",\"pattern\"],\"type\":\"object\"}},{\"description\":\"Searches for text or regex patterns in the content of files matching a GLOB pattern.\",\"name\":\"search_files_content\",\"parameters\":{\"properties\":{\"excludePatterns\":{\"description\":\"Patterns to exclude from search\",\"items\":{\"type\":\"string\"},\"type\":\"array\"},\"is_regex\":{\"description\":\"If true, treat query as regex; otherwise literal text\",\"type\":\"boolean\"},\"path\":{\"description\":\"The starting directory path\",\"type\":\"string\"},\"query\":{\"description\":\"The text or regex pattern to search for\",\"type\":\"string\"}},\"required\":[\"path\",\"query\"],\"type\":\"object\"}},{\"description\":\"Create a new file or completely overwrite an existing file with new content.\",\"name\":\"write_file\",\"parameters\":{\"properties\":{\"content\":{\"description\":\"The content to write to the file\",\"type\":\"string\"},\"path\":{\"description\":\"The file path to write\",\"type\":\"string\"}},\"required\":[\"path\",\"content\"],\"type\":\"object\"}}]}]}\n"
    form:
      alt:
      - sse
    url: https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:streamGenerateContent?alt=sse
    method: POST
  response:
    proto: HTTP/2.0
    proto_major: 2
    proto_minor: 0
    content_length: -1
    body: "data: {\"candidates\": [{\"content\": {\"parts\": [{\"text\": \"1\",\"thoughtSignature\": \"CiQBcsjafE6ea0oIeaMzLCA0iTr+90B3EN1ARGWrT2tKEfmkjuwKZgFyyNp8IlgcOrZ8yrqIsQs+iUtnWFKGLQadQQ7h7yANDrx00WN9rgWgCeKgJFj7Sl9NC4VaamDBQdcL74lGxf3SuDcZKzDYWclKTBh9nJgoIMfJSag0AicotzEFv908v3IheP0yBQqpAQFyyNp8DuNZfmFqQnVE2LrXzibmWJ36If9vjX6q8XBmTLb3m6boEBW1k1q/4IrIPe7HU3C3SnYEpmrsrP6gDQEo7t5B78riQNnFXEN3ScSfV5j5dR4k9brtY7D1Z/yfgQREQfxz04AV4ZCHUB+V2TnOnwoNq7jJW87GVx6pr8MjmvOEJWchisKxDw0f0QrGx2NALg93nbR+9fh0K2VVf61/IBOZB4wGTIs=\"}],\"role\": \"model\"},\"finishReason\": \"STOP\",\"index\": 0}],\"usageMetadata\": {\"promptTokenCount\": 1383,\"candidatesTokenCount\": 1,\"totalTokenCount\": 1444,\"cachedContentTokenCount\": 779,\"promptTokensDetails\": [{\"modality\": \"TEXT\",\"tokenCount\": 1383}],\"cacheTokensDetails\": [{\"modality\": \"TEXT\",\"tokenCount\": 779}],\"thoughtsTokenCount\": 60},\"modelVersion\": \"gemini-2.5-flash\",\"responseId\": \"QRgqadP9L4iqkdUP79GFoQc\"}\r\n\r\n"
    headers: {}
    status: 200 OK
    code: 200
    duration: 1.684557417s
